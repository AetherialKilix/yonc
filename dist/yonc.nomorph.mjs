var Y=Object.defineProperty;var B=e=>{throw TypeError(e)};var j=(e,n,t)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var T=(e,n,t)=>j(e,typeof n!="symbol"?n+"":n,t),$=(e,n,t)=>n.has(e)||B("Cannot "+t);var o=(e,n,t)=>($(e,n,"read from private field"),t?t.call(e):n.get(e)),c=(e,n,t)=>n.has(e)?B("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),f=(e,n,t,r)=>($(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t),M=(e,n,t)=>($(e,n,"access private method"),t);var q=/^@(\d+)$/,D=/^<!--@(\d+)-->$/,P="/* compiled */",E=class{constructor(n,...t){let r=n.reduce((l,u,i)=>l+u+(i<t.length?`<!--@${i}-->`:""),""),a=document.createElement("root");a.innerHTML=r;let h=document.createTreeWalker(a,NodeFilter.SHOW_COMMENT),s,m=[];for(;s=h.nextNode();){let l=s.nodeValue.match(q);if(!l)continue;let u=t[l[1]];m.push([s,u])}let W=[],V=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT);for(;s=V.nextNode();){let l=[...s.attributes];for(let u of l){let{name:i,nodeValue:N}=u,O=N.match(D);if(!O)continue;let A=t[O[1]];i.startsWith("on")&&typeof A=="function"?(s.setAttribute(i,P),s.addEventListener(i.substring(2),A)):l.push([s,i,String(A)])}}for(let l of m){let[u,i]=l,N=document.createElement("template");N.innerHTML=i,u.parentNode.replaceChild(N.content,u)}return W.forEach(([l,u,i])=>{l.setAttribute(u,i)}),a}};import v from"morphdom";var b,g,w,d,F,C,H,y,S,L=class L extends HTMLElement{constructor(){super();c(this,y);c(this,b);c(this,g,!1);c(this,w,!1);c(this,d,[]);c(this,F,(t,r,a)=>{typeof o(this,d)[r]>"u"&&(o(this,d)[r]=t);let h=o(this,d);return[new Proxy(G(o(this,d)[r])||{},{get(){return()=>h[r]}}),s=>{typeof s=="function"&&(s=s(o(this,d)[r])),o(this,d)[r]=s,o(this,g)?a():M(this,y,S).call(this)}]});c(this,C,[]);c(this,H,(t,r,a)=>{let h=o(this,C)[a];(typeof h>"u"||!z(h,r))&&(o(this,C)[a]=r,typeof t=="function"&&t())});f(this,b,this.attachShadow({mode:"closed"}))}connectedCallback(){o(this,b).innerHTML="<template></template>",M(this,y,S).call(this),f(this,w,!0)}disconnectedCallback(){f(this,w,!1)}attributeChangedCallback(t,r,a){if(console.log("attributeChangedCallback",t,r,a),!o(this,w)){console.log("skipped rendering attribute changed:",t);return}console.log("rendering attribute changed:",t),M(this,y,S).call(this)}render(t){return"<!-- empty -->"}};b=new WeakMap,g=new WeakMap,w=new WeakMap,d=new WeakMap,F=new WeakMap,C=new WeakMap,H=new WeakMap,y=new WeakSet,S=function(){f(this,g,!0);try{let t=L.maxReRenders,r=!1,a;do{r=!1;let h=0,s=0;if(a=this.render.call(this,{useState:m=>o(this,F).call(this,m,s++,()=>{r=!0}),useEffect:(m,W=[])=>o(this,H).call(this,m,W,h++),children:Array.from(this.children),$:(...m)=>new E(...m)}),!t--)throw f(this,g,!1),new Error("too many re-renders!")}while(r);v(o(this,b).firstChild,a)}finally{f(this,g,!1)}},T(L,"maxReRenders",100);var p=L;function z(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==n[t])return!1;return!0}function G(e){switch(typeof e){case"boolean":return new Boolean(e);case"number":return new Number(e);case"string":return new String(e);case"function":return new Function(e);case"bigint":return new BigInt(e);case"object":return e;default:return{}}}function I(e){if(typeof e!="function")throw Error("Render callback must be of type function!");return class extends p{render(t){return e(t)}}}var k,R,x=class extends p{constructor(){super();c(this,k);c(this,R,null);f(this,k,this.attachInternals())}get formValue(){return o(this,R)}set formValue(t){f(this,R,t),o(this,k).setFormValue(t)}};k=new WeakMap,R=new WeakMap,T(x,"formAssociated",!0);export{p as YComponent,x as YFormComponent,I as YFunctionComponent};
